{"version":3,"sources":["asyncLoad.js","App.js","serviceWorker.js","i18n/zh.js","i18n/en.js","index.js","../../../i18n-xml-js/index.js","logo.svg","../../../i18n-xml-js/lib/react-plugin.js"],"names":["asyncLoad","CustomI8n","componentLoad","state","com","err","then","mod","default","setTimeout","setState","catch","e","this","props","style","width","height","display","alignItems","justifyContent","fontSize","Component","HookUsage","useI18nJs","lang","setLocal","local","localPlurals","value","onChange","currentTarget","dangerouslySetInnerHTML","__html","string","user_agreement_msg","btn_retry","array","citys","map","city","key","cardinal","plurals","wastetime","App","className","src","logo","alt","welcome_messages","app_name","notif_button_update_all","Boolean","window","location","hostname","match","i18n","I18nJs","en","zh","ReactDOM","render","defaultLocal","document","getElementById","navigator","serviceWorker","ready","registration","unregister","pluralization","count","ordinal","range","count1","count2","n","i18nJsVMList","I18nJsClass","langs","backup","addLangs","updateLang","backupLang","merge","_langs","Object","assign","_local","forEach","vm","defineProperties","get","plurals_cardinal","type","data","other","args","plurals_ordinal","plurals_range","ivm","push","module","exports","_value","_setValue","_i18VmModules","LangContext","React","createContext","langModule","_getLangModule","vmName","registerI18nModule","name","console","warn","Error","I18nConsumer","createElement","Consumer","children","useContext","I18nProvider","useState","setValue","Provider","propTypes","PropTypes","instanceOf"],"mappings":"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","file":"static/js/main.2d937482.chunk.js","sourcesContent":["import React, { Component} from 'react';\n\n// 异步加载组件\nfunction asyncLoad(componentLoad) {\n  return class ContentComponent extends Component {\n    state = {\n        com: null,\n        err: null\n    }\n    componentDidMount() {\n      componentLoad().then(mod => {\n        mod = mod.default || mod;\n        return setTimeout(()=>{this.setState({ com: mod})}, 3000)\n      }).catch((e)=>{\n        this.setState({err: e || '组件加载失败'});\n      });\n    }\n    render() {\n        if (this.state.com) {\n          return (<this.state.com {...this.props} />)\n        }\n        if(this.state.err) {\n          return <div>\n            {this.state.err}\n          </div>\n        }\n        return <div style={{\n          width: '100%',\n          height: 300,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize:30\n        }}>\n          loading\n        </div>\n    }\n  }\n}\n\nexport default asyncLoad;\n","import React from 'react';\nimport {I18nConsumer, useI18nJs} from 'i18n-xml-js/lib/react-plugin.js'\n// import CustomI8n from './CustomI8n.js';\nimport logo from './logo.svg';\nimport './App.css';\n\n// 异步加载 \nimport asyncLoad from './asyncLoad.js'\nconst CustomI8n = asyncLoad(()=>import('./CustomI8n.js'));\n\nfunction App() {\n  return (\n    <I18nConsumer>\n      {({lang, setLocal, local, localPlurals})=>{\n        return (<div className=\"App\">\n          <header className=\"App-header\">\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n            <h2>{lang.string.welcome_messages('小朋友', 5)}</h2>\n            <ul>\n              <li>\n                选择语言:\n                <select value={local} onChange={(e)=>{setLocal(e.currentTarget.value)}}>\n                  <option value=\"en\">en</option>\n                  <option value=\"zh\">zh</option>\n                </select>\n              </li>\n              <li>应用名字:{lang.string.app_name}</li>\n              <li>动作:<span dangerouslySetInnerHTML={{__html:lang.string.notif_button_update_all}}></span></li>\n              <li>城市: {lang.array.citys.map((city)=><span key={city}> {city} </span>)}</li>\n              <li>基本复数(时长):{localPlurals.cardinal(lang.plurals.cardinal.wastetime,1, 1)}</li>\n              <li>基本复数(时长):{localPlurals.cardinal(lang.plurals.cardinal.wastetime,2, 2)}</li>\n            </ul>\n            <HookUsage/>\n            <CustomI8n/>\n          </header>\n        </div>)\n      }}\n    </I18nConsumer>\n  );\n}\n\n\n/**\n * 基于hooks来使用\n * @param {*} props \n */\nconst HookUsage = (props)=>{\n  // 使用hooks获取语言\n  const {lang, setLocal, local, localPlurals} = useI18nJs();\n  return (<ul>\n    <li><h3>基于hooks的使用:</h3></li>\n    <li>\n      选择语言:\n      <select value={local} onChange={(e)=>{setLocal(e.currentTarget.value)}}>\n        <option value=\"en\">en</option>\n        <option value=\"zh\">zh</option>\n      </select>\n    </li>\n    <li>用户提示:<span dangerouslySetInnerHTML={{__html:lang.string.user_agreement_msg('https://baidu.com/')}}></span></li>\n    <li>动作2:<span dangerouslySetInnerHTML={{__html:lang.string.btn_retry}}></span></li>\n    <li>城市: {lang.array.citys.map((city)=><span key={city}> {city} </span>)}</li>\n    <li>基本复数(时长):{localPlurals.cardinal(lang.plurals.cardinal.wastetime,1, 1)}</li>\n    <li>基本复数(时长):{localPlurals.cardinal(lang.plurals.cardinal.wastetime,2, 2)}</li>\n  </ul>)\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const local = {\n  \"array\": {\n    \"citys\": [\"北京\", \"上海\", \"济南\", \"青岛\"]\n  },\n  \"plurals\": {\n    \"cardinal\": {\n      \"wastetime\": {\n        \"one\": (...arg) => `${arg[0]} 分钟`,\n        \"other\": (...arg) => `${arg[0]} 分钟`\n      }\n    }\n  },\n  \"string\": {\n    \"welcome_messages\": (...arg) => `你好, ${arg[0]}! 你有 ${arg[1]} 新消息.`,\n    \"app_name\": \"应用市场\",\n    \"pref_title_auto_update_market\": \"自动更新 \\\"应用市场\\\"\",\n    \"notif_button_update_all\": \"<font color=#ff6243>更新全部</font>\",\n    \"btn_retry\": \"再试一次\",\n    \"btn_price\": (...arg) => `￥${arg[0]}`,\n    \"btn_progress\": (...arg) => `${arg[0]}%%`,\n    \"btn_pausable\": \"暂停\",\n    \"user_agreement_msg\": (...arg) => `要使用慈祥基础服务, 你需要同意本应用搜集和使用您的个人信息, 巴拉巴拉吧啦 <a href=\\\"${arg[0]}\\\">隐私政策</a>. 您是否同意?`\n  }\n};\nexport default local;","const local = {\n  \"array\": {\n    \"citys\": [\"BeiJing\", \"ShangHai\", \"JiNan\", \"QingDao\"]\n  },\n  \"plurals\": {\n    \"cardinal\": {\n      \"wastetime\": {\n        \"one\": (...arg) => `${arg[0]} minute`,\n        \"other\": (...arg) => `${arg[0]} minutes`\n      }\n    }\n  },\n  \"string\": {\n    \"welcome_messages\": (...arg) => `Hello, ${arg[0]}! You have ${arg[1]} new messages.`,\n    \"app_name\": \"GetApps\",\n    \"pref_title_auto_update_market\": \"Update \\\"GetApps\\\" automatically\",\n    \"notif_button_update_all\": \"<font color=#ff6243>Update all</font>\",\n    \"btn_retry\": \"TRY AGAIN\",\n    \"btn_price\": (...arg) => `￥${arg[0]}`,\n    \"btn_progress\": (...arg) => `${arg[0]}%%`,\n    \"btn_pausable\": \"PAUSE\",\n    \"user_agreement_msg\": (...arg) => `To use the basic features of this service, you must agree that us can collect, process, and use your personal data, balabalbabalbalab, <a href=\\\"${arg[0]}\\\">Privacy Policy</a>. Agree?`\n  }\n};\nexport default local;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {I18nJs, I18nProvider} from 'i18n-xml-js/lib/react-plugin.js';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport zh from './i18n/zh.js'\nimport en from './i18n/en.js'\n\nconst i18n = new I18nJs({en, zh}, 'en');\n\n\nReactDOM.render(<I18nProvider i18n={i18n} defaultLocal={'zh'}><App/></I18nProvider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import merge from 'lodash/merge';\nconst defaultLocal = 'en';\nlet local = defaultLocal;\n\n//语言复数判断器\nexport const pluralization = {\n  'zh': {\n    cardinal: (count)=>{\n      if (count == 0) {\n        return 'zero'\n      }\n      return 'other'\n    },\n    ordinal: (count)=>{\n      return 'other'\n    },\n    range: (count1, count2)=>{\n      return 'other'\n    }\n  },\n  'en': {\n    cardinal: (count)=>{\n      if (count == 0) {\n        return 'zero'\n      }\n      if (count == 1) {\n        return 'one'\n      }\n      return 'other'\n    },\n    ordinal: (n)=>{\n      if (n % 10 == 1 && n % 100 != 11) {\n        return 'one'\n      }\n      if (n % 10 == 2 && n % 100 != 12) {\n        return 'two'\n      }\n      if (n % 10 == 3 && n % 100 != 13) {\n        return 'few'\n      }\n      return 'other'\n    },\n    range: (count1, count2)=>{\n      return 'other'\n    }\n  }\n}; \n\nconst i18nJsVMList = [];\n\nexport class I18nJsClass {\n  /**\n   * @param {翻译语言} langs \n   * @param {备份f翻译 default: 'en'} backup \n   */\n  constructor(langs={}, backup){\n    this.backup = backup || defaultLocal;\n    this.langs = {}; // 所有语言\n    this.lang = {};// 当前语言\n    this.addLangs(langs);\n    this.updateLang();\n  }\n  \n  updateLang() {\n    let lang = this.langs[local] || {};\n    let backupLang = {}\n    merge(backupLang, this.langs[this.backup]);\n    merge(backupLang, lang);\n    this.lang = backupLang;\n  }\n  addLangs(_langs) {\n    Object.assign(this.langs, _langs)\n  }\n  \n}\n\n// 添加语言复数判断器\n/**\n * @param {*} _pluralizations \n * _pluralizations={en:..., zh:...}\n */\nexport function addPluralization(_pluralizations) {\n  Object.assign(pluralization, _pluralizations)\n}\n\n// 给外部调用的 复数判断器\nexport const plurals={};\nObject.defineProperties(plurals, {\n  'cardinal': {\n    get() {\n      return function(plurals_cardinal, count, ...args) {\n        if(!plurals_cardinal) {return ''};\n        const type = pluralization[local].cardinal(count);\n        let data = plurals_cardinal[type] || plurals_cardinal.other;\n        if(typeof data === 'function') {\n          data = data(...args);\n        }\n        return data || '';\n      }\n    }\n  },\n  'ordinal': {\n    get() {\n      return function(plurals_ordinal, count, ...args) {\n        if(!plurals_ordinal) {return ''};\n        const type = pluralization[local].ordinal(count);\n        let data = plurals_ordinal[type] || plurals_ordinal.other;\n        if(typeof data === 'function') {\n          data = data(...args);\n        }\n        return data || '';\n      }\n    }\n  },\n  'range': {\n    get() {\n      return function(plurals_range, count1, count2, ...args) {\n        if(!plurals_range) {return ''};\n        const type = pluralization[local].range(count1, count2);\n        let data = plurals_range[type] || plurals_range.other;\n        if(typeof data === 'function') {\n          data = data(...args);\n        }\n        return data || '';\n      }\n    }\n  }\n})\n\n/**\n * \n * @param {语言} _local \n */\nexport function setLocal(_local) {\n  if(local === _local) {\n    return;\n  }\n  local = _local;\n  i18nJsVMList.forEach((vm)=>{\n    vm.updateLang(local);\n  })\n}\n\n/**\n * @param {翻译语言} langs \n * @param {默认用英语作为备份语言 default: 'en'} backup \n */\nfunction I18nJs(langs, backup) {\n  const ivm = new I18nJsClass(langs, backup)\n  i18nJsVMList.push(ivm);\n  return ivm;\n}\n\nexport default I18nJs;\n\n","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { I18nJsClass, setLocal, plurals } from '../index.js';\nexport { default as I18nJs } from '../index.js'; // import PropTypes from 'prop-types';\n\nconst _i18VmModules = {};\n\nlet _value, _setValue;\n\nconst LangContext = React.createContext({\n  local: '',\n  lang: {},\n  langModule: {},\n  setLocal: () => {},\n  plurals: {}\n});\n\nfunction _getLangModule() {\n  const langModule = {};\n\n  for (let vmName in _i18VmModules) {\n    langModule[vmName] = _i18VmModules[vmName].lang;\n  }\n\n  return langModule;\n}\n/**\n * 注册module\n * @param {模块名} name \n * @param {I18nJsClass 实例} vm \n */\n\n\nexport function registerI18nModule(name, vm) {\n  if (_i18VmModules[name]) {\n    console.warn(new Error(`_i18VmModules['${name}']模块已经被注册过了`));\n    return;\n  }\n\n  _i18VmModules[name] = vm;\n\n  if (!_value || !_setValue) {\n    return;\n  }\n\n  const langModule = _getLangModule();\n\n  _setValue(Object.assign({}, _value, {\n    langModule\n  }));\n}\nexport function I18nConsumer(props) {\n  return React.createElement(LangContext.Consumer, null, props.children);\n}\nexport const useI18nJs = () => {\n  return useContext(LangContext);\n};\n/**\n * \n * @param {*} props \n * @param props.defaultLocal 默认本地语\n * @param props.lang  I18nJs实例\n */\n\nexport const I18nProvider = props => {\n  const [value, setValue] = useState(() => {\n    const defaultLocal = props.defaultLocal;\n    setLocal(defaultLocal);\n\n    const langModule = _getLangModule(); // 设置 local\n\n\n    const _setLocal = local => {\n      setLocal(local);\n\n      const langModule = _getLangModule();\n\n      setValue(Object.assign({}, value, {\n        lang: props.i18n.lang,\n        langModule,\n        local: local\n      }));\n    };\n\n    return {\n      lang: props.i18n.lang,\n      local: defaultLocal || 'en',\n      langModule,\n      setLocal: _setLocal,\n      localPlurals: plurals\n    };\n  });\n  _value = value;\n  _setValue = setValue;\n  return React.createElement(LangContext.Provider, {\n    value: value\n  }, props.children);\n};\nI18nProvider.propTypes = {\n  defaultLocal: PropTypes.string,\n  i18n: PropTypes.instanceOf(I18nJsClass)\n};\n"],"sourceRoot":""}